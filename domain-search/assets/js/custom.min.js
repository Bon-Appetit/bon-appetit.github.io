document.addEventListener('DOMContentLoaded',function(){const e=document.getElementById('searchBtn'),t=document.getElementById('loadingSpinner'),n=document.getElementById('results');e.addEventListener('click',async()=>{n.innerHTML='',t.style.display='flex',e.disabled=!0;const d=document.getElementById('listSelect').value,s=document.getElementById('searchInput').value.trim(),i=document.getElementById('regexCheck').checked;try{const e=await fetch(d);if(!e.ok)throw new Error('Network response was not ok.');const o=await e.text();let c;if(s)c=o.split('\n').filter(e=>i?new RegExp(s,'i').test(e):e.toLowerCase().includes(s.toLowerCase()));else throw n.innerHTML='<p class="notice">Please enter a search phrase.</p>',new Error('No search phrase entered.');c.length>0?n.innerHTML=`<p>Found <mark>${c.length}</mark> matches:</p><ul>`+c.map(e=>`<li>${e}</li>`).join('')+'</ul>':n.innerHTML='<p class="notice">No matches found.</p>'}catch(e){'No search phrase entered.'!==e.message&&(console.error('Error:',e),n.innerHTML='<p class="notice">Error fetching the data. Please try again later.</p>')}finally{t.style.display='none',e.disabled=!1,n.scrollIntoView({behavior:'smooth'})}})});
